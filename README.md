# Commit Viewer
A Java application that provides REST APIs for retrieving commits of the specified git hub repository.

**Author**: Amy Lin

## Getting Started
The app consists of three parts - MongoDB (`http://localhost:27017`), Java web service (`http://localhost:8080`) and an 
Angular client (`http://localhost:80`) served from nginx. The Local runtime environment can be created with docker 
compose. 

1. Clone the repository
2. Build the server
```
./gradlew build
```
3. In the root directory, run `docker-compose up -d --build` to create the Docker images
4. Verify the containers are running and the ports are exposed with `docker ps`
5. Access the form via `http://localhost/`

## Assumptions
* To use the git CLI, it is assumed that the user has already cloned the repository.
* System OS is Linux
* The MongoDB container is not configured to retain any data when it is destroyed. This can be done via volume mount 
in the docker-compose file should it be necessary.
* 'ProjectService' implements all database CRUD operations for completeness. Currently only 'getCommitsByProjectUrl' 
operation is used to achieve the basic requirements.

## Future enhancements
* Host the solution in the cloud, e.g. AWS, and rewrite REST endpoints as lambda functions
* Automatically update the list of commits when the list of commits returned by git CLI has new commits
* Enable user authentication so the app can also be used for private git repositories
* Provide Swagger doc on API endpoints
* Implement the complete git commit object model so every detail of a commit can be stored. As a result, when the user 
passes in options of CLI to query specific information about the commits (e.g. `--pretty=oneline` or 
`--pretty=format:"%h - %an, %ar : %s"`), the data model will be able to accommodate it. 

## Built With
Java Springboot backend
* [Spring boot](https://spring.io/projects/spring-boot) - The Java backend framework
* [Gradle](https://docs.gradle.org/current/userguide/userguide.html) - Java dependency management
* [Java](https://hub.docker.com/_/java) - Java 1.8 Docker image

MongoDB
* [MongoDB](https://hub.docker.com/_/mongo) - MongoDB Docker image

## Running the tests
### Java unit tests
In the `commit-viewer` directory, run
```
./gradlew test
```

### Java controller endpoint tests (with Postman)
#### End points testing with Postman
Get a project by its name
```
GET /project/<name> HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Cache-Control: no-cache
```
Create a new project (ID will be auto-generated by Mongo upon submission)
```
POST /project HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Cache-Control: no-cache

{
   
}
```
Delete a project by ID (auto-generated by Mongo upon submission)
```
DELETE /project/<id> HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Cache-Control: no-cache
```

Delete all projects stored in the database
```
DELETE /projects HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Cache-Control: no-cache}

```